terminal:
docker search kafka
docker pull bitnami/kafka
docker search kafka


terminal pc
docker ps -a
docker network create kafka-network
docker run -d --name kafkaMQ --network kafka-network -p 9092:9092 KAFKA_ADVERTISED=PLAINTEXTz://localhost:9092 bitnami/kafka:latest
docker ps -a
docker ps
docker ps -a
docker logs kafkaMQ
docker rm kafkaMQ
docker run -d --name kafkaMQ --network kafka-network -p 9092:9092 -e KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://localhost:9092 bitnami/kafka:latest
docker logs kafkaMQ
docker start kafkaMQ


rabbitMQ
docker search rabbitmq
docker pull rabbitmq:3-management
docker run -d --name rabbitMQ -p 5672:5672 -p 15672:15672 rabbitmq:3-management
docker ps -a



elasticsearch
docker network create elastic
docker pull docker.elastic.co/elasticsearch/elasticsearch:8.4.3
docker run --name es-aliconcon --net elastic -p 9200:9200 -p 9300:9300 -it docker.elastic.co/elasticsearch/elasticsearch:8.4.3



Các lệnh về Key
SET key value [EX seconds] [PX milliseconds] [NX|XX]: Thiết lập giá trị của key với các tùy chọn hết hạn và điều kiện.
GET key: Lấy giá trị của key.
DEL key [key ...]: Xóa một hoặc nhiều key.
EXISTS key: Kiểm tra xem key có tồn tại hay không.
EXPIRE key seconds: Đặt thời gian hết hạn cho key tính bằng giây.
TTL key: Kiểm tra thời gian sống còn lại của key.


Các lệnh về String
APPEND key value: Nối thêm một giá trị vào cuối giá trị hiện tại của key.
INCR key: Tăng giá trị của key lên 1.
DECR key: Giảm giá trị của key đi 1.
MGET key [key ...]: Lấy giá trị của nhiều key.
MSET key value [key value ...]: Thiết lập giá trị của nhiều key.



Các lệnh về Hash
HSET key field value: Thiết lập giá trị của một field trong hash.
HGET key field: Lấy giá trị của một field trong hash.
HDEL key field [field ...]: Xóa một hoặc nhiều field trong hash.
HGETALL key: Lấy tất cả các field và giá trị của hash.
HEXISTS key field: Kiểm tra xem một field có tồn tại trong hash hay không.



Các lệnh về List
LPUSH key value [value ...]: Thêm một hoặc nhiều giá trị vào đầu danh sách.
RPUSH key value [value ...]: Thêm một hoặc nhiều giá trị vào cuối danh sách.
LPOP key: Lấy và xóa giá trị đầu tiên của danh sách.
RPOP key: Lấy và xóa giá trị cuối cùng của danh sách.
LRANGE key start stop: Lấy các phần tử từ vị trí start đến stop trong danh sách.


Các lệnh về Set
SADD key member [member ...]: Thêm một hoặc nhiều thành viên vào set.
SREM key member [member ...]: Xóa một hoặc nhiều thành viên khỏi set.
SMEMBERS key: Lấy tất cả các thành viên của set.
SISMEMBER key member: Kiểm tra xem một giá trị có phải là thành viên của set hay không.


Các lệnh về Sorted Set
ZADD key score member [score member ...]: Thêm một hoặc nhiều thành viên vào sorted set với điểm số tương ứng.
ZREM key member [member ...]: Xóa một hoặc nhiều thành viên khỏi sorted set.
ZRANGE key start stop [WITHSCORES]: Lấy các phần tử từ vị trí start đến stop trong sorted set.
ZREVRANGE key start stop [WITHSCORES]: Lấy các phần tử từ vị trí start đến stop trong sorted set theo thứ tự ngược lại.


Các lệnh về Pub/Sub
PUBLISH channel message: Gửi một thông điệp tới channel.
SUBSCRIBE channel [channel ...]: Đăng ký lắng nghe thông điệp từ các channel.


Các lệnh về Transaction
MULTI: Bắt đầu một transaction.
EXEC: Thực thi tất cả các lệnh trong transaction.
DISCARD: Hủy bỏ tất cả các lệnh trong transaction.


Thư viện express-mongo-sanitize được sử dụng trong các ứng dụng Node.js để ngăn chặn các cuộc tấn công 
NoSQL injection bằng cách làm sạch dữ liệu đầu vào trước khi nó được sử dụng trong các truy vấn MongoDB. 
Cuộc tấn công NoSQL injection là một kiểu tấn công mà kẻ tấn công có thể chèn hoặc thao túng dữ liệu trong các truy vấn cơ sở dữ liệu NoSQL, như MongoDB, để thực hiện các hành động không mong muốn hoặc truy cập dữ liệu không được phép.

Thư viện xss trong Node.js được sử dụng để ngăn chặn các cuộc tấn công 
Cross-Site Scripting (XSS) bằng cách làm sạch dữ liệu đầu vào và đầu ra, loại bỏ hoặc mã hóa các thành phần độc hại có thể được nhúng vào nội dung HTML.
Chức năng của Thư viện xss
Làm sạch dữ liệu đầu vào và đầu ra: 
Thư viện xss giúp lọc bỏ hoặc mã hóa các thẻ HTML và các nội dung nguy hiểm, đảm bảo rằng các dữ liệu được hiển thị trên trang web không chứa mã độc.
Ngăn chặn tấn công XSS: Bằng cách sử dụng xss, 
bạn có thể ngăn chặn các kẻ tấn công chèn các tập lệnh độc hại vào các trang web của bạn, bảo vệ người dùng khỏi việc thực thi mã không mong muốn.

Đoạn mã này định nghĩa một middleware cho Express.js để giới hạn số lượng yêu cầu (requests) được thực hiện trong một khoảng thời gian nhất định, giúp bảo vệ ứng dụng khỏi các cuộc tấn công DDoS hoặc lạm dụng tài nguyên.
Cụ thể:
rateLimit: Đây là middleware từ thư viện express-rate-limit dùng để giới hạn tốc độ yêu cầu.
windowMs: 15 * 60 * 1000: Xác định khoảng thời gian 15 phút (15 phút * 60 giây * 1000 milliseconds).
max: 20: Giới hạn số lượng yêu cầu tối đa là 20 trong khoảng thời gian windowMs (15 phút).
skipSuccessfulRequests: true: Nếu yêu cầu thành công (có status code < 400), nó sẽ không được tính vào giới hạn này.
Tóm lại, authLimiter sẽ giới hạn người dùng chỉ có thể thực hiện tối đa 20 yêu cầu trong 15 phút đối với các yêu cầu không thành công. Nếu một yêu cầu thành công, nó sẽ không được tính vào giới hạn này. Middleware này có thể được sử dụng để bảo vệ các endpoint liên quan đến xác thực (authentication) hoặc bất kỳ endpoint nào cần giới hạn tốc độ truy cập.




file paginate.plugin.js plugin


hi Tiết Tác Dụng của Code
Phương thức paginate được thêm vào schema:

Sử dụng schema.static.paginate để thêm phương thức paginate vào bất kỳ schema nào sử dụng plugin này.
Phương thức paginate sẽ nhận hai tham số:
filter: Một đối tượng chứa điều kiện lọc tài liệu từ MongoDB.
options: Một đối tượng chứa các tùy chọn để phân trang, sắp xếp, và populate dữ liệu.
Xử lý tùy chọn sắp xếp (sortBy):

Nếu có options.sortBy, phương thức sẽ xử lý nó thành chuỗi sắp xếp MongoDB.
sortBy là một chuỗi với định dạng field:order (ví dụ: name:asc,createdAt:desc), tách ra và chuyển đổi thành chuỗi sắp xếp MongoDB (sort).
Tính toán limit, page, và skip:

limit: Số lượng tài liệu tối đa trên mỗi trang.
page: Trang hiện tại, xác định điểm bắt đầu của các tài liệu cần truy vấn.
skip: Số lượng tài liệu cần bỏ qua dựa trên trang hiện tại.
Thực hiện các truy vấn:

countPromise: Đếm tổng số tài liệu phù hợp với filter.
docsPromise: Truy vấn tài liệu với filter, sort, và limit.
Nếu có options.populate, plugin sẽ tự động thực hiện populate (nạp dữ liệu liên quan).
Trả về kết quả:

Sử dụng Promise.all để chờ cả hai truy vấn hoàn tất và trả về một đối tượng chứa:
results: Danh sách tài liệu đã phân trang.
page: Trang hiện tại.
limit: Số lượng tài liệu trên mỗi trang.
totalPages: Tổng số trang.
totalResults: Tổng số tài liệu phù hợp với bộ lọc.